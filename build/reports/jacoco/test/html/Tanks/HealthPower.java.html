<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>HealthPower.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">TanksGame2024</a> &gt; <a href="index.source.html" class="el_package">Tanks</a> &gt; <span class="el_source">HealthPower.java</span></div><h1>HealthPower.java</h1><pre class="source lang-java linenums">package Tanks;

import org.checkerframework.checker.units.qual.A;
import org.json.JSONTokener;
import processing.core.PApplet;
import processing.core.PImage;
import processing.core.PShape;
import processing.core.PVector;
import processing.data.JSONArray;
import processing.data.JSONObject;
import processing.event.KeyEvent;
import processing.event.MouseEvent;

import java.awt.*;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;

import java.io.*;
import java.util.*;
import java.lang.Math;

public class HealthPower {
    
    private Player player;
    private Level level;
    private App app;
    private int health;
    private float power;
    private int barWidth;
    private int barHeight;
    private int[] colourScheme;
    private float healthLength;
    private float powerLength;
<span class="fc" id="L34">    private boolean loseHealth=false;</span>

    /**
     * Constructor for HealthPower class. Keeps track of each player's health and power and the GUI for them.
     * 
     * @param app is the App object that we will pass through to allow for drawing + more implementations of the PApplet library.
     * @param level is the Level object which a HealthPower object belongs to.
     * @param player is the Player object which a HealthPower object belongs to.
     */
<span class="fc" id="L43">    public HealthPower(App app, Level level, Player player) {</span>
<span class="fc" id="L44">        this.app = app;</span>
<span class="fc" id="L45">        this.level = level;</span>
<span class="fc" id="L46">        this.player = player;</span>
<span class="fc" id="L47">        this.health = 100;</span>
<span class="fc" id="L48">        this.power = 50;</span>
<span class="fc" id="L49">        this.barWidth = 175;</span>
<span class="fc" id="L50">        this.barHeight = 25;</span>
<span class="fc" id="L51">        this.colourScheme = player.getColourScheme();</span>
<span class="fc" id="L52">        this.healthLength = ((float)this.health/(float)100) * (float)this.barWidth;</span>
<span class="fc" id="L53">        this.powerLength = ((float)this.power/(float)100) * (float)this.barWidth;</span>
<span class="fc" id="L54">    }</span>

    // no Javadoc comments required for setters and getters
    public int getHealth() {
<span class="fc" id="L58">        return this.health;</span>
    }

    public float getPower() {
<span class="fc" id="L62">        return this.power;</span>
    }

    public void setLoseHealth(boolean value) {
<span class="fc" id="L66">        this.loseHealth = value;</span>
<span class="fc" id="L67">    }</span>

    /**
     * Draw health bar at the top of the screen.
     * 
     * @return true if executed, false if otherwise.
     */
    public boolean drawHealthBar() { // what the method says
        try{
<span class="fc" id="L76">            int xCoordinate = ((864*3)/5) - (this.barWidth/2);</span>
<span class="fc" id="L77">            int yCoordinate = 10;</span>
    
            // fill in
<span class="fc" id="L80">            app.fill(this.colourScheme[0], this.colourScheme[1], this.colourScheme[2]);</span>
<span class="fc" id="L81">            app.rect(xCoordinate, yCoordinate, this.healthLength, this.barHeight);</span>
    
<span class="fc" id="L83">            app.strokeWeight(5);</span>
<span class="fc" id="L84">            app.stroke(0); // black box</span>
<span class="fc" id="L85">            app.line(xCoordinate + this.powerLength, yCoordinate, xCoordinate + this.barWidth, yCoordinate);</span>
<span class="fc" id="L86">            app.line(xCoordinate + this.powerLength, yCoordinate + this.barHeight, xCoordinate + this.barWidth, yCoordinate + this.barHeight);</span>
<span class="fc" id="L87">            app.line(xCoordinate + this.powerLength, yCoordinate, xCoordinate + this.powerLength, yCoordinate + this.barHeight);</span>
<span class="fc" id="L88">            app.line(xCoordinate + this.barWidth, yCoordinate, xCoordinate + this.barWidth, yCoordinate + this.barHeight);</span>
    
<span class="fc" id="L90">            app.strokeWeight(5);</span>
<span class="fc" id="L91">            app.stroke(87); // grey box</span>
<span class="fc" id="L92">            app.line(xCoordinate, yCoordinate, xCoordinate + this.powerLength, yCoordinate);</span>
<span class="fc" id="L93">            app.line(xCoordinate, yCoordinate + this.barHeight, xCoordinate + this.powerLength, yCoordinate + this.barHeight);</span>
<span class="fc" id="L94">            app.line(xCoordinate, yCoordinate, xCoordinate, yCoordinate + this.barHeight);</span>
<span class="fc" id="L95">            app.line(xCoordinate + this.powerLength, yCoordinate, xCoordinate + this.powerLength, yCoordinate + this.barHeight);</span>

<span class="fc" id="L97">            return true;</span>

<span class="nc" id="L99">        } catch (Exception e) {</span>
<span class="nc" id="L100">            return false;</span>
        }

    }

    /**
     * Display how much health and power a player has.
     * 
     * @return true if executed, false if otherwise.
     */
    public boolean displayHealthPowerText() { // what the method says
        try {
<span class="fc" id="L112">            int xCoordinate = ((864*3)/5) - (this.barWidth/2);</span>
<span class="fc" id="L113">            int yCoordinate = 10;</span>
            
<span class="fc" id="L115">            app.strokeWeight(1);</span>
<span class="fc" id="L116">            app.textSize(18);</span>
<span class="fc" id="L117">            app.fill(0);</span>
<span class="fc" id="L118">            app.text(&quot;Health:&quot;, xCoordinate-(this.barWidth/2)+14, yCoordinate+this.barHeight-5); // word health next to bar</span>
<span class="fc" id="L119">            app.text(&quot;Power:&quot;, xCoordinate-(this.barWidth/2)+14, yCoordinate+this.barHeight+22); // word power next to bar</span>
<span class="fc" id="L120">            app.text((int)this.power, xCoordinate, yCoordinate+this.barHeight+22); // power number next to bar</span>
<span class="fc" id="L121">            app.text(this.health, xCoordinate + this.barWidth + 10, yCoordinate+this.barHeight-5);</span>

<span class="fc" id="L123">            return true;</span>
<span class="nc" id="L124">        } catch (Exception e) {</span>
<span class="nc" id="L125">            return false;</span>
        }
    }

    /**
     * Update the health amount. If the health falls below the current power amount, update the power such that it is equal to the health, as the power is at most equal to the health.
     * 
     * @param health is the health amount that we want to update our health value to.
     * @return true if executed, false if otherwise.
     */
    public boolean updateHealth(int health) { 
        try {
<span class="fc" id="L137">            this.health = health;</span>
<span class="fc" id="L138">            this.healthLength = ((float)this.health/(float)100) * (float)this.barWidth;</span>
    
<span class="fc bfc" id="L140" title="All 2 branches covered.">            if (this.health &lt;= this.power) {</span>
<span class="fc" id="L141">                this.power = this.health;</span>
<span class="fc" id="L142">                this.powerLength = ((float)this.power/(float)100) * (float)this.barWidth;</span>
            }

<span class="fc" id="L145">            return true;</span>

<span class="nc" id="L147">        } catch (Exception e) {</span>
<span class="nc" id="L148">            return false;</span>
        }
    }

    /**
     * Decreases the health amount. Call when a player has been hit by a projectile.
     * 
     * @param decrease is the amount we want our health to decrease by.
     * @return true if executed, false if otherwise.
     */
    public boolean decreaseHealth(int decrease) {
<span class="fc" id="L159">            int newHealth = this.health - (int)decrease;</span>
<span class="fc bfc" id="L160" title="All 2 branches covered.">            if (this.loseHealth==true) {</span>
<span class="fc" id="L161">                this.updateHealth(newHealth);</span>
    
<span class="pc bpc" id="L163" title="1 of 2 branches missed.">                if (this.health==newHealth) {</span>
<span class="fc" id="L164">                    this.loseHealth = false;</span>
                }

<span class="fc" id="L167">                return true;</span>
            }

<span class="fc" id="L170">            return false;</span>
    }

    /**
     * Update the power amount. It cannot exceed the health amount.
     * 
     * @param power is the amount of power we want to update our power to.
     * @return true if excecuted, false if otherwise.
     */
    public boolean updatePower(float power) {
<span class="fc bfc" id="L180" title="All 2 branches covered.">        if (power &lt;= this.health) {</span>
<span class="fc" id="L181">            this.power = power;</span>
<span class="fc" id="L182">            this.powerLength = ((float)this.power/(float)100) * (float)this.barWidth;</span>

<span class="fc" id="L184">            return true;</span>
        }

<span class="fc" id="L187">        return false;</span>
    }

    /**
     * Increase the power by 1.2 when we press the 'w' key.
     * 
     * @return true if excecuted, false if otherwise.
     */
    public boolean powerIncrease() { // for keyPressed
<span class="pc bpc" id="L196" title="1 of 2 branches missed.">        if (this.power &lt;= this.health) {</span>
<span class="fc" id="L197">            this.updatePower(this.power+(float)1.2);</span>

<span class="fc" id="L199">            return true;</span>
        }

<span class="nc" id="L202">        return false;</span>
    }

    /**
     * Decrease the power by 1.2 when we press the 's' key.
     * 
     * @return true if excecuted, false if otherwise.
     */
    public boolean powerDecrease() { // for keyPressed
<span class="fc bfc" id="L211" title="All 2 branches covered.">        if (this.power &gt;= 0) {</span>
<span class="fc" id="L212">            this.updatePower(this.power-(float)1.2);</span>

<span class="fc" id="L214">            return true;</span>
        }

<span class="fc" id="L217">        return false;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>